function delegateService(e){return["$log",function(t){function n(e){this.handle=e}var a=this,o=this._instances=[];this._registerInstance=function(e,t){return e.$$delegateHandle=t,o.push(e),function(){var t=o.indexOf(e);-1!==t&&o.splice(t,1)}},this.$getByHandle=function(e){return e?new n(e):a},e.forEach(function(e){n.prototype[e]=function(){var n,a,r=this.handle,l=arguments,i=0;return o.forEach(function(t){t.$$delegateHandle===r&&(i++,a=t[e].apply(t,l),1===i&&(n=a))}),i?n:t.warn('Delegate for handle "'+this.handle+'" could not find a corresponding element with delegate-handle="'+this.handle+'"! '+e+"() was not called!\nPossible cause: If you are calling "+e+'() immediately, and your element with delegate-handle="'+this.handle+'" is a child of your controller, then your element may not be compiled yet. Put a $timeout around your call to '+e+"() and try again.")},a[e]=function(){var t,n,a=arguments;return o.forEach(function(o,r){n=o[e].apply(o,a),0===r&&(t=n)}),t}})}]}!function(e,t){"function"==typeof define&&define.amd?define(["exports"],t):"undefined"!=typeof exports?t(exports):t(e.dragscroll={})}(this,function(e){var t,n,a=window,o=document,r="mousemove",l="mouseup",i="mousedown",u="EventListener",c="add"+u,d="remove"+u,s=[],f=function(e,u){for(e=0;e<s.length;)u=s[e++],u=u.container||u,u[d](i,u.md,0),a[d](l,u.mu,0),a[d](r,u.mm,0);for(s=[].slice.call(o.getElementsByClassName("dragscroll")),e=0;e<s.length;)!function(e,u,d,s,f,g){(g=e.container||e)[c](i,g.md=function(t){e.hasAttribute("nochilddrag")&&o.elementFromPoint(t.pageX,t.pageY)!=g||(s=1,u=t.clientX,d=t.clientY,t.preventDefault())},0),a[c](l,g.mu=function(){s=0},0),a[c](r,g.mm=function(a){s&&((f=e.scroller||e).scrollLeft-=t=-u+(u=a.clientX),f.scrollTop-=n=-d+(d=a.clientY),e==o.body&&((f=o.documentElement).scrollLeft-=t,f.scrollTop-=n))},0)}(s[e++])};"complete"==o.readyState?f():a[c]("load",f,0),e.reset=f}),angular.module("pdf",[]).service("pdfDelegate",delegateService(["prev","next","zoomIn","zoomOut","zoomTo","rotate","getPageCount","getCurrentPage","goToPage","load"])),angular.module("pdf").controller("PdfCtrl",["$scope","$element","$attrs","pdfDelegate","$log","$q",function(e,t,n,a,o,r){var l=function(e,t,n){for(var a=atob(e),o=[],r=0;r<a.length;r+=n){for(var l=a.slice(r,r+n),i=new Array(l.length),u=0;u<l.length;u++)i[u]=l.charCodeAt(u);var c=new Uint8Array(i);o.push(c)}var d=new Blob(o,{type:t});return d},i="application/pdf",u=a._registerInstance(this,n.delegateHandle);e.$on("$destroy",u);var c=this,d="";if(e.$eval(n.b64)){var s=e.$eval(n.b64),f=l(s,i,512),g=URL.createObjectURL(f);d=g}else d=e.$eval(n.url);var p,m=e.$eval(n.headers);e.pageCount=0;var h=1,v=0,y=n.scale?n.scale:1,b=t.find("canvas")[0],w=b.getContext("2d"),$=function(t){angular.isNumber(t)||(t=parseInt(t)),!isFinite(t)||0>=t||t>e.pageCount||null===p||angular.isUndefined(p)||p.getPage(t).then(function(e){var t=e.getViewport(y);b.height=t.height,b.width=t.width;var n={canvasContext:w,viewport:t};e.render(n)})},P=function(){b.style.webkitTransform="rotate("+v+"deg)",b.style.MozTransform="rotate("+v+"deg)",b.style.msTransform="rotate("+v+"deg)",b.style.OTransform="rotate("+v+"deg)",b.style.transform="rotate("+v+"deg)"};c.prev=function(){1>=h||(h=parseInt(h,10)-1,$(h))},c.next=function(){h>=p.numPages||(h=parseInt(h,10)+1,$(h))},c.zoomIn=function(e){return e=e||.2,y=parseFloat(y)+e,$(h),y},c.zoomOut=function(e){return e=e||.2,y=parseFloat(y)-e,y=y>0?y:.1,$(h),y},c.zoomTo=function(e){return e=e?e:1,y=parseFloat(e),$(h),y},c.rotate=function(){v=0===v?90:90===v?180:180===v?270:0,P()},c.getPageCount=function(){return e.pageCount},c.getCurrentPage=function(){return h},c.goToPage=function(e){null===p||angular.isUndefined(p)||(h=e,$(e))},c.load=function(t){t&&(d=t);var n={};return"string"==typeof d?n.url=d:n.data=d,m&&(n.httpHeaders=m),PDFJS.getDocument(n).then(function(t){p=t,e.$apply(function(){e.pageCount=t.numPages,$(1)})},function(e){return o.error(e),r.reject(e)})},d&&c.load()}]),angular.module("pdf").directive("pdfViewerToolbar",["pdfDelegate",function(e){return{restrict:"E",template:'<div class="clearfix mb2 white bg-blue"><div class="panel-head"><a title="Back" href=""ng-click="prev()"class="button py2 m0 button-nav-dark">  <i class="fa fa-backward"></i></a><a  title="Next" href=""ng-click="next()"class="button py2 m0 button-nav-dark">  <i class="fa fa-forward"></i></a><a  title="Zoom In" href=""ng-click="zoomIn()"class="button py2 m0 button-nav-dark"> <i class="fa fa-search-plus"></i></a><a title="Zoom Out" href=""ng-click="zoomOut()"class="button py2 m0 button-nav-dark"><i class="fa fa-search-minus"></i></a><a title="Rotate left" href=""ng-click="rotate()"class="button py2 m0 button-nav-dark"><i class="icon-flipped fa fa-undo"></i></a><span class="px1 button-nav-dark">Page</span> <input type="number" style="width: 63px; padding-left: 10px !important;" class="field-dark" min="1" max="{{pageCount}}" steep="1" ng-model="currentPage" ng-change="goToPage()" style="width: 10%"> <span class="px1 button-nav-dark">/ {{pageCount}}</span> </div></div>',scope:{pageCount:"="},link:function(t,n,a){var o=a.delegateHandle;t.currentPage=1,t.prev=function(){e.$getByHandle(o).prev(),r()},t.next=function(){e.$getByHandle(o).next(),r()},t.zoomIn=function(){e.$getByHandle(o).zoomIn()},t.zoomOut=function(){e.$getByHandle(o).zoomOut()},t.rotate=function(){e.$getByHandle(o).rotate()},t.goToPage=function(){e.$getByHandle(o).goToPage(t.currentPage)};var r=function(){t.currentPage=e.$getByHandle(o).getCurrentPage()}}}}]),angular.module("pdf").directive("pdfViewer",["$window","$log","pdfDelegate",function(){return{restrict:"E",template:'<pdf-viewer-toolbar ng-if="showToolbar" delegate-handle="{{id}}" page-count="pageCount"></pdf-viewer-toolbar>    <div class="free dragscroll"><canvas></canvas> </div><pdf-viewer-toolbar  ng-hide="hideToolbarBottom" delegate-handle="{{id}}" page-count="pageCount"></pdf-viewer-toolbar>',scope:!0,controller:"PdfCtrl",link:function(e,t,n){e.id=n.delegateHandle,e.showToolbar=e.$eval(n.showToolbar)||!1,e.hideToolbarBottom=e.$eval(n.hideToolbarBottom)||!1,dragscroll.reset()}}}]);